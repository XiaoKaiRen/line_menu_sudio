Messaging API reference
Show all
#Common specifications
Common specifications for Messaging API, such as the domain name of endpoints, response when a request succeeds or fails, and rate limit.

Domain name
Rate limits
Status codes
Response headers
Error responses
Other common specifications
Show 
#Webhooks
When an event occurs, such as when a user adds your LINE Official Account as a friend or sends a message, the LINE Platform sends an HTTPS POST request to the webhook URL (bot server).

The webhook URL is configured for each channel in the LINE Developers Console.

Show 
#Webhook Event Objects
These are JSON objects containing events generated by the LINE Platform.

Show 
#Webhook settings
You can configure, test, and get information on channel webhook endpoints.

Endpoints
PUT  /v2/bot/channel/webhook/endpoint
GET  /v2/bot/channel/webhook/endpoint
POST /v2/bot/channel/webhook/test
Show 
#Getting content
You can get the content that a user has sent to your LINE Official Account by using the message IDs received via the webhook.

Endpoints
GET /v2/bot/message/{messageId}/content
GET /v2/bot/message/{messageId}/content/transcoding
GET /v2/bot/message/{messageId}/content/preview
Show 
#Channel access token
You can issue, get, or revoke the channel access token required when calling the Messaging API from the app. For more information, see Channel access token in the LINE Platform basics.

Endpoints
POST /oauth2/v2.1/token
GET  /oauth2/v2.1/verify
GET  /oauth2/v2.1/tokens/kid
POST /oauth2/v2.1/revoke
POST /oauth2/v3/token
POST /v2/oauth/accessToken
POST /v2/oauth/verify
POST /v2/oauth/revoke
Show 
#Message
You can send a message and obtain information about the sent message.

Endpoints
POST /v2/bot/message/reply
POST /v2/bot/message/push
POST /v2/bot/message/multicast
POST /v2/bot/message/narrowcast
GET  /v2/bot/message/progress/narrowcast
POST /v2/bot/message/broadcast
POST /v2/bot/chat/loading/start
GET  /v2/bot/message/quota
GET  /v2/bot/message/quota/consumption
GET  /v2/bot/message/delivery/reply
GET  /v2/bot/message/delivery/push
GET  /v2/bot/message/delivery/multicast
GET  /v2/bot/message/delivery/broadcast
POST /v2/bot/message/validate/reply
POST /v2/bot/message/validate/push
POST /v2/bot/message/validate/multicast
POST /v2/bot/message/validate/narrowcast
POST /v2/bot/message/validate/broadcast
Show 
#Managing Audience
You can create, update, activate, or delete an audience. Specify the audience when sending narrowcast messages.

Endpoints
POST   /v2/bot/audienceGroup/upload
POST   /v2/bot/audienceGroup/upload/byFile
PUT    /v2/bot/audienceGroup/upload
PUT    /v2/bot/audienceGroup/upload/byFile
POST   /v2/bot/audienceGroup/click
POST   /v2/bot/audienceGroup/imp
PUT    /v2/bot/audienceGroup/{audienceGroupId}/updateDescription
PUT    /v2/bot/audienceGroup/{audienceGroupId}/activate
DELETE /v2/bot/audienceGroup/{audienceGroupId}
GET    /v2/bot/audienceGroup/{audienceGroupId}
GET    /v2/bot/audienceGroup/list
GET    /v2/bot/audienceGroup/shared/{audienceGroupId}
GET    /v2/bot/audienceGroup/shared/list
Show 
#Insights
You can obtain information on the number of messages sent from the LINE Official Account, number of friends, and other statistical data.

Endpoints
GET /v2/bot/insight/message/delivery?date={date}
GET /v2/bot/insight/followers?date={date}
GET /v2/bot/insight/demographic
GET /v2/bot/insight/message/event?requestId={requestId}
GET /v2/bot/insight/message/event/aggregation?customAggregationUnit={customAggregationUnit}&from={from}&to={to}
GET /v2/bot/message/aggregation/info
GET /v2/bot/message/aggregation/list
Show 
#Users
You can get information of users who have added your LINE Official Account as a friend.

 Accessing your own user ID
You can access your user ID under the Basic settings tab of your channel on the LINE Developers Console. For more information on permissions per role in the LINE Developers Console, see Channel roles in Managing roles. There is no API available for retrieving your own user ID.

Endpoints
GET /v2/bot/profile/{userId}
GET /v2/bot/followers/ids
Show 
#Membership
You can get information about the memberships of your LINE Official Accounts. For more information, see Use membership features in the Messaging API documentation.

Endpoints
GET /v2/bot/membership/subscription/{userId}
GET /v2/bot/membership/{membershipId}/users/ids
GET /v2/bot/membership/list
Show 
#Bot
You can obtain basic information on the LINE Official Account's bots.

Endpoints
GET /v2/bot/info
Show 
#Group chats
You can obtain information about the group chats and their members that the LINE Official Account is a member of.

Endpoints
GET  /v2/bot/group/{groupId}/summary
GET  /v2/bot/group/{groupId}/members/count
GET  /v2/bot/group/{groupId}/members/ids
GET  /v2/bot/group/{groupId}/member/{userId}
POST /v2/bot/group/{groupId}/leave
Show 
#Multi-person chats
You can obtain information about the multi-person chats and their members that the LINE Official Account is a member of.

Endpoints
GET  /v2/bot/room/{roomId}/members/count
GET  /v2/bot/room/{roomId}/members/ids
GET  /v2/bot/room/{roomId}/member/{userId}
POST /v2/bot/room/{roomId}/leave
Show 
#Rich menu
Customizable menu that is displayed on your LINE Official Account's chat screen. For more information, see Use rich menus.

Endpoints
POST   /v2/bot/richmenu
POST   /v2/bot/richmenu/validate
POST   /v2/bot/richmenu/{richMenuId}/content
GET    /v2/bot/richmenu/{richMenuId}/content
GET    /v2/bot/richmenu/list
GET    /v2/bot/richmenu/{richMenuId}
DELETE /v2/bot/richmenu/{richMenuId}
POST   /v2/bot/user/all/richmenu/{richMenuId}
GET    /v2/bot/user/all/richmenu
DELETE /v2/bot/user/all/richmenu
#Create rich menu
POST https://api.line.me/v2/bot/richmenu
Creates a rich menu.

You must upload a rich menu image, and set the rich menu as the default rich menu or link the rich menu to a user for the rich menu to be displayed. You can create up to 1000 rich menus for one LINE Official Account with the Messaging API.

 Before creating a rich menu
There is also an endpoint for validating rich menu object.

Example request

Shell
curl -v -X POST https://api.line.me/v2/bot/richmenu \
-H 'Authorization: Bearer {channel access token}' \
-H 'Content-Type: application/json' \
-d \
'{
    "size": {
      "width": 2500,
      "height": 1686
    },
    "selected": false,
    "name": "Nice rich menu",
    "chatBarText": "Tap to open",
    "areas": [
      {
        "bounds": {
          "x": 0,
          "y": 0,
          "width": 2500,
          "height": 1686
        },
        "action": {
          "type": "postback",
          "data": "action=buy&itemid=123"
        }
      }
   ]
}'
#Rate limit
100 requests per hour

Creating and deleting rich menus using the LINE Official Account Manager isn't subject to this restriction.

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

Content-Type
Required
application/json

#Request body
Specify a rich menu object to be displayed as a rich menu.

#Response
Returns status code 200 and a JSON object with the following information.

richMenuId
String
ID of a rich menu. Used when uploading a rich menu image.

Example response

JSON
{
  "richMenuId": "{richMenuId}"
}
#Error response
Returns the following HTTP status code and an error response:

Code	Description
400	Couldn't create a rich menu. Consider these reasons:
An invalid rich menu object is specified.
The maximum number of rich menus that can be created has been reached (up to 1000).
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If you specify a rich menu object that doesn't have a required JSON key for the rich menu object (400 Bad Request)
{
  "message": "The request body has 1 error(s)",
  "details": [
    {
      "message": "must be specified",
      "property": "name"
    }
  ]
}

// If you specify an invalid scheme for a URI action (400 Bad Request)
{
  "message": "The request body has 1 error(s)",
  "details": [
    {
      "message": "invalid uri",
      "property": "areas[0].action.uri"
    }
  ]
}
#Validate rich menu object
POST https://api.line.me/v2/bot/richmenu/validate
Validate a rich menu object.

You can verify that a rich menu object is valid as a request body for creating rich menu.

Request example

Shell
curl -v -X POST https://api.line.me/v2/bot/richmenu/validate \
-H 'Authorization: Bearer {channel access token}' \
-H 'Content-Type: application/json' \
-d \
'{
    "size": {
      "width": 2500,
      "height": 1686
    },
    "selected": false,
    "name": "Nice rich menu",
    "chatBarText": "Tap to open",
    "areas": [
      {
        "bounds": {
          "x": 0,
          "y": 0,
          "width": 2500,
          "height": 1686
        },
        "action": {
          "type": "postback",
          "data": "action=buy&itemid=123"
        }
      }
   ]
}'
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request header
Authorization
Required
Bearer {channel access token}

Content-Type
Required
application/json

#Request body
Specify a rich menu object you want to validate.

#Response
If the request body is valid as a rich menu object, returns the 200 HTTP status code and an empty JSON object.

Response example

JSON
{}
#Error response
Returns the following HTTP status code and an error response:

Code	Description
400	An invalid rich menu object is specified.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If you specify a rich menu object that doesn't have a required JSON key for the rich menu object (400 Bad Request)
{
  "message": "The request body has 1 error(s)",
  "details": [
    {
      "message": "must be specified",
      "property": "name"
    }
  ]
}

// If you specify an invalid scheme for a URI action (400 Bad Request)
{
  "message": "The request body has 1 error(s)",
  "details": [
    {
      "message": "invalid uri",
      "property": "areas[0].action.uri"
    }
  ]
}
#Upload rich menu image
POST https://api-data.line.me/v2/bot/richmenu/{richMenuId}/content
 This domain name is different from that of other endpoints
The domain name (api-data.line.me) of this endpoint is for sending and receiving large amounts of data in the LINE Platform for Messaging API. This domain name differs from that of other endpoints (api.line.me).

Uploads and sets an image to a rich menu.

#Requirements for rich menu image
You can use rich menu images with the following specifications:

Image format: JPEG or PNG
Image width: 800 to 2500 pixels
Image height: 250 pixels or more
Image aspect ratio (width / height): 1.45 or more
Max file size: 1 MB
 Note
You can't replace an image set to a rich menu. To update your rich menu image, create a new rich menu object and upload another image.

Example request

Shell
curl -v -X POST https://api-data.line.me/v2/bot/richmenu/{richMenuId}/content \
-H "Authorization: Bearer {channel access token}" \
-H "Content-Type: image/jpeg" \
-T image.jpg
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

Content-Type
Required
image/jpeg or image/png

#Path parameters
richMenuId
Required
The ID of the rich menu to set the image to

#Response
Returns status code 200 and an empty JSON object.

Example response

JSON
{}
#Error response
Returns the following HTTP status code and an error response:

Code	Description
400	Couldn't set the image to the rich menu. Consider these reasons:
The image doesn't meet the requirements.
An image is already set to the rich menu.
404	A non-existent rich menu is specified.
415	An unsupported media format is specified in Content-Type (other than image/jpeg and image/png).
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If you specify an image that doesn't meet the requirements (400 Bad Request)
{
  "message": "The image size is not allowed for richmenu"
}

// The image is already set to the rich menu (400 Bad Request)
{
  "message": "An image has already been uploaded to the richmenu"
}
#Download rich menu image
GET https://api-data.line.me/v2/bot/richmenu/{richMenuId}/content
 This domain name is different from that of other endpoints
The domain name (api-data.line.me) of this endpoint is for sending and receiving large amounts of data in the LINE Platform for Messaging API. This domain name differs from that of other endpoints (api.line.me).

Downloads an image associated with a rich menu.

Example request

Shell
curl -v -X GET "https://api-data.line.me/v2/bot/richmenu/{richMenuId}/content" \
-H 'Authorization: Bearer {channel access token}' \
-o picture.jpg
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Path parameters
richMenuId
Required
ID of the rich menu with the image to be downloaded

#Response
Returns status code 200 and the binary data of the rich menu image. The image can be downloaded as shown in the example request.

#Error response
Returns the following HTTP status code and an error response:

Code	Description
404	Couldn't download the image. Consider these reasons:
A non-existent rich menu is specified.
There is no image set to the rich menu.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If the rich menu doesn't exist (404 Not Found)
{
  "message": "Not found"
}
#Get rich menu list
GET https://api.line.me/v2/bot/richmenu/list
Gets a list of the rich menu response object of all rich menus created by Create a rich menu.

 Note
You can't retrieve rich menus created with LINE Official Account Manager.

Example request

Shell
curl -v -X GET https://api.line.me/v2/bot/richmenu/list \
-H 'Authorization: Bearer {channel access token}'
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Response
Returns status code 200 and a JSON object with the following information.

richmenus
Array
Array of rich menu response objects

Example response

JSON
{
  "richmenus": [
    {
      "richMenuId": "{richMenuId}",
      "name": "Nice rich menu",
      "size": {
        "width": 2500,
        "height": 1686
      },
      "chatBarText": "Tap to open",
      "selected": false,
      "areas": [
        {
          "bounds": {
            "x": 0,
            "y": 0,
            "width": 2500,
            "height": 1686
          },
          "action": {
            "type": "postback",
            "data": "action=buy&itemid=123"
          }
        }
      ]
    }
  ]
}
#Error response
For more information, see Status codes and Error responses in the Common specifications section.

#Get rich menu
GET https://api.line.me/v2/bot/richmenu/{richMenuId}
Gets a rich menu via a rich menu ID.

Example request

Shell
curl -v -X GET https://api.line.me/v2/bot/richmenu/{richMenuId} \
-H 'Authorization: Bearer {channel access token}'
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Path parameters
richMenuId
Required
ID of a rich menu

#Response
Returns status code 200 and a rich menu response object.

Example response

JSON
{
  "richMenuId": "{richMenuId}",
  "name": "Nice rich menu",
  "size": {
    "width": 2500,
    "height": 1686
  },
  "chatBarText": "Tap to open",
  "selected": false,
  "areas": [
    {
      "bounds": {
        "x": 0,
        "y": 0,
        "width": 2500,
        "height": 1686
      },
      "action": {
        "type": "postback",
        "data": "action=buy&itemid=123"
      }
    }
  ]
}
#Error response
Returns the following HTTP status code and an error response:

Code	Description
404	A non-existent rich menu is specified.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If you specify a non-existent rich menu (404 Not Found)
{
  "message": "Not found"
}
#Delete rich menu
DELETE https://api.line.me/v2/bot/richmenu/{richMenuId}
Deletes a rich menu.

 Rich menu limits
If you have reached the maximum of 1,000 rich menus with the Messaging API for your LINE Official Account, you must delete a rich menu before you can create a new one.

Example request

Shell
curl -v -X DELETE https://api.line.me/v2/bot/richmenu/{richMenuId} \
-H 'Authorization: Bearer {channel access token}'
#Rate limit
100 requests per hour

Creating and deleting rich menus using the LINE Official Account Manager isn't subject to this restriction.

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Path parameters
richMenuId
Required
ID of a rich menu

#Response
Returns status code 200 and an empty JSON object.

Example response

JSON
{}
#Error response
Returns the following HTTP status code and an error response:

Code	Description
404	A non-existent rich menu is specified.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If you specify a non-existent rich menu (404 Not Found)
{
  "message": "Not found"
}
#Set default rich menu
POST https://api.line.me/v2/bot/user/all/richmenu/{richMenuId}
Sets the default rich menu. The default rich menu is displayed to all users who have added your LINE Official Account as a friend and are not linked to any per-user rich menu. If a default rich menu has already been set, calling this endpoint replaces the current default rich menu with the one specified in your request.

The rich menu is displayed in the following order of priority (highest to lowest):

The per-user rich menu set with the Messaging API
The default rich menu set with the Messaging API
The default rich menu set with LINE Official Account Manager
Example request

Shell
curl -v -X POST https://api.line.me/v2/bot/user/all/richmenu/{richMenuId} \
-H "Authorization: Bearer {channel access token}"
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Path parameters
richMenuId
Required
ID of a rich menu

#Response
Returns status code 200 and an empty JSON object.

Example response

JSON
{}
#Error Response
Returns the following HTTP status code and an error response:

Code	Description
400	There is no image set to the rich menu.
404	A non-existent rich menu is specified.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If there is no image set to the rich menu (400 Bad Request)
{
  "message": "must upload richmenu image before applying it to user",
  "details": []
}

// If you specify a non-existent rich menu (404 Not Found)
{
  "message": "Not found"
}
#Get default rich menu ID
GET https://api.line.me/v2/bot/user/all/richmenu
Gets the ID of the default rich menu set with the Messaging API.

Example request

Shell
curl -v -X GET https://api.line.me/v2/bot/user/all/richmenu \
-H 'Authorization: Bearer {channel access token}'
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Response
Returns status code 200 and a JSON object with the following information.

richMenuId
String
ID of a rich menu

Example response

JSON
{
  "richMenuId": "{richMenuId}"
}
#Error Response
Returns the following HTTP status code and an error response:

Code	Description
403	The default rich menu is set by another channel, such as LINE Official Account Manager.
404	The default rich menu isn't set.
For more information, see Status codes and Error responses in the Common specifications section.

Example error response

JSON
// If the default rich menu is set by another channel (403 Forbidden)
{
  "message": "the richmenu is owned by another channel",
  "details": []
}

// If the default rich menu isn't set (404 Not Found)
{
  "message": "no default richmenu",
  "details": []
}
#Clear default rich menu
DELETE https://api.line.me/v2/bot/user/all/richmenu
Clears the default rich menu set with the Messaging API.

Example request

Shell
curl -v -X DELETE https://api.line.me/v2/bot/user/all/richmenu \
-H 'Authorization: Bearer {channel access token}'
#Rate limit
2,000 requests per second

For more information on rate limits, see Rate limits.

#Request headers
Authorization
Required
Bearer {channel access token}

#Response
Returns status code 200 and an empty JSON object.

Example response

JSON
{}
#Error Response
For more information, see Status codes and Error responses in the Common specifications section.

Was this section helpful?

Yes
No
#Per-user rich menu
You can set the rich menu on a per-user basis by specifying the user ID and the rich menu ID. For more information, see Use per-user rich menus in the Messaging API documentation.

Endpoints
POST   /v2/bot/user/{userId}/richmenu/{richMenuId}
POST   /v2/bot/richmenu/bulk/link
GET    /v2/bot/user/{userId}/richmenu
DELETE /v2/bot/user/{userId}/richmenu
POST   /v2/bot/richmenu/bulk/unlink
POST   /v2/bot/richmenu/batch
GET    /v2/bot/richmenu/progress/batch
POST   /v2/bot/richmenu/validate/batch
Show 
#Rich menu alias
You can provide users a rich menu with tab switching using rich menu aliases and rich menu switch action. For more information, see Switch between tabs on rich menus in the Messaging API documentation.

Endpoints
POST   /v2/bot/richmenu/alias
DELETE /v2/bot/richmenu/alias/{richMenuAliasId}
POST   /v2/bot/richmenu/alias/{richMenuAliasId}
GET    /v2/bot/richmenu/alias/{richMenuAliasId}
GET    /v2/bot/richmenu/alias/list
Show 
#Account link
You can link the service account provided by the provider (corporate and developer) with the account of the LINE user.

Endpoints
POST /v2/bot/user/{userId}/linkToken
Show 
#Message objects
JSON object which contains the contents of the message you send.

 Validating message objects
By using the following endpoints, you can validate message objects:

Validate message objects of a reply message
Validate message objects of a push message
Validate message objects of a multicast message
Validate message objects of a narrowcast message
Validate message objects of a broadcast message
Show 
#Action objects
These are types of actions for your bot to take when a user taps a button or an image in a message.

Postback action
Message action
URI action
Datetime picker action
Camera action
Camera roll action
Location action
Richmenu Switch Action
Clipboard action
Show 
#Rich menu structure
Rich menus consist of either of these objects.

Rich menu object without the rich menu ID. Use this object when you create a rich menu.
Rich menu response object with the rich menu ID. This object is returned when you get a rich menu or get a list of rich menus.
Area objects and action objects are included in these objects.

